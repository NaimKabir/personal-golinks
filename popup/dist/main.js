(()=>{function e(e){linksElement=document.getElementById("links");const t=document.createElement("li"),n=document.createTextNode(e.shortLink+" "+e.id),i=document.createElement("button");i.innerHtml="rm",i.addEventListener("click",(()=>{var n;n=e.id,chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[n]}),t.remove()})),t.appendChild(n),t.appendChild(i),linksElement.appendChild(t)}chrome.declarativeNetRequest.getDynamicRules((function(t){links=function(e){return e.map((e=>{let t=e.condition.urlFilter;return t=t.slice("*://".length),{shortLink:t,longLink:e.action.redirect.url,id:e.id}}))}(t),links.forEach(e)}));const t=document.getElementById("shortLink"),n=document.getElementById("longLink");!function(e){chrome.windows.getLastFocused(null,(t=>{const n={active:!0,highlighted:!0,windowId:t.id};chrome.tabs.query(n,(t=>{const n=t[0];e.value=n.url||""}))}))}(n),document.getElementById("add").addEventListener("click",(()=>{var e,i;e=t.value,i=n.value,chrome.declarativeNetRequest.getDynamicRules((t=>{const n=t.length>=1?t[t.length-1].id+1:1;chrome.declarativeNetRequest.updateDynamicRules({addRules:[{id:n,priority:1,action:{type:"redirect",redirect:{url:i}},condition:{urlFilter:"*://go/"+e,resourceTypes:["csp_report","font","image","main_frame","media","object","other","ping","script","stylesheet","sub_frame","webbundle","websocket","webtransport","xmlhttprequest"]}}],removeRuleIds:[n]})}))}))})();
